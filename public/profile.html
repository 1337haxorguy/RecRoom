<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="initial-scale=1, width=device-width">
  	
  	<link rel="stylesheet"  href="./styles/profile.css" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Helvetica Neue:wght@400&display=swap" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Instrument Serif:wght@400&display=swap" />
  	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=PP Neue Montreal:wght@400;500&display=swap" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  	
  	
  	
</head>
<body>

	 

  	<div class="iphone-13-mini-1">
    		<div class="iphone-13-mini-1-inner">
              <a href="">
      			<div class="rilink-parent">
					<i class="fa-solid fa-link"></i>
        				<div class="recroomme">recroom.me/yourUser</div>
      			</div>
			  </a>
    		</div>
    		<div class="iphone-13-mini-1-child">
      			<div class="overview-parent">
        				<div class="overview">Overview</div>
        				<div class="frame-parent">
          					<div class="science-fiction-wrapper">
            						<div class="introButton" 
                        >Science fiction</div>
          					</div>
          					<div class="fantasy-wrapper">
            						<div class="science-fiction">Fantasy</div>
          					</div>
          					<div class="fantasy-wrapper">
            						<div class="science-fiction">Romance</div>
          					</div>
          					<div class="alternative-rock-wrapper">
            						<div class="science-fiction">Rock</div>
          					</div>
          					<div class="fantasy-wrapper">
            						<div class="science-fiction">Comedy</div>
          					</div>
          					<div class="fantasy-wrapper">
            						<div class="science-fiction">Comedy</div>
          					</div>
        				</div>
      			</div>
    		</div>
    		<div class="tv-shows-parent">
      			<div class="tv-shows">TV Shows </div>
      			<div class="image">
        				<div class="friends">Friends</div>
      			</div>
                    <div class="image1">
                            <div class="queen-of-the">Cobra Kai</div>
                    </div>
                    <div class="image1">
                            <div class="queen-of-the">Queen of the South</div>
                    </div>
      			<div class="more-tv-shows-parent">
        				<div class="more-tv-shows">More TV shows</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Gilmore Girls</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">How I Met Your Mother</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Nobody Wants This</div>
        				</div>
        				<div class="frame-div">
          					<div class="thats-so-true">Arcane: League of Legends</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Cobra Kai</div>
        				</div>
      			</div>
    		</div>
    		<div class="songs-parent">
      			<div class="songs">Songs </div>
      			<div class="image">
        				<div class="friends">Espresso</div>
        				<div class="sabrina-carpenter">Sabrina Carpenter</div>
      			</div>
      			<div class="image1">
        				<div class="solo-dates">Solo Dates</div>
        				<div class="fig">Fig</div>
      			</div>
      			<div class="image1">
        				<div class="apt">APT.</div>
        				<div class="rose-ft-bruno">Rose ft. Bruno Mars</div>
      			</div>
      			<div class="more-tv-shows-parent">
        				<div class="more-tv-shows">More songs</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Thatâ€™s So True - Gracie Abrams </div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Alaska - Maggie Rogers</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Buzz - Niki</div>
        				</div>
        				<div class="frame-div">
          					<div class="thats-so-true">Naked in Manhattan - Chappell Roan</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Quicksand - SZA</div>
        				</div>
      			</div>
    		</div>
    		<div class="movies-parent">
      			<div class="songs">Movies</div>
                  <div class="image">
                    <div class="friends">La La Land</div>
              </div >

                
                <div class="image1">
                    <img class="image1" alt="" src="./assets/7a4e5ba71800c7087f50bb63ce04e167.png">
                    <div class="queen-of-the">John Wick</div>
      			</div>
                <div>
                <div class="image1">
                        <img class="image1" alt="" src="./assets/7a4e5ba71800c7087f50bb63ce04e167.png">
        				<div class="queen-of-the">Tangled</div>
                </div>

                </div>
      			<div class="more-tv-shows-parent">
        				<div class="more-tv-shows">More Movies</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Knives Out</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Spiderman: Homecoming</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">The Platform</div>
        				</div>
        				<div class="frame-div">
          					<div class="thats-so-true">Aftersun</div>
        				</div>
        				<div class="thats-so-true-gracie-abrams-wrapper">
          					<div class="thats-so-true">Midsommar</div>
        				</div>
      			</div>
    		</div class="frame-group">
    		<img class="iphone-13-mini-1-item" alt="" src="./assets/06ccc6f43c54abc807975344ff5211c9.png">
    		
    		<div class="my-rec-room">My Rec Room</div>
    		<div class="created-for-hackru-container">
      			<p class="created-for-hackru">Created for HackRU</p>
      			<p class="created-for-hackru">By Team RAMS</p>
    		</div>
  	</div>
  	
  	<script>


document.addEventListener('DOMContentLoaded', function () {
    // Function to load selections from localStorage
    async function loadSelections() {
        const tvShows = JSON.parse(localStorage.getItem('selected_tv') || '[]');
        const movies = JSON.parse(localStorage.getItem('selected_movies') || '[]');
        
        await updateSection('.tv-shows-parent', tvShows, getCoverImageTV, "TV shows");
        await updateSection('.movies-parent', movies, getCoverImageMovie, "Movies");
    }

    // Function to get background style with cover image
    function getBackgroundStyle(href) {
        return `
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${href});
            background-size: cover;
            background-position: center;
            min-height: 150px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        `;
    }

    // Function to get cover image from API
    async function getCoverImageTV(show) {
        const response = await fetch('/api/getCoverImageTV', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ input: show })
        });
        const data = await response.json();
        return data;
    }

    async function getCoverImageMovie(movie) {
        const response = await fetch('/api/getCoverImageMovie', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ input: movie })
        });
        const data = await response.json();
        return data;
    }

    // Function to update section with fetched data and add to "More" if necessary
    async function updateSection(parentSelector, items, fetchCoverImage, itemType) {
        const parent = document.querySelector(parentSelector);
        if (!parent) return;

        // Clear existing items
        const existingItems = parent.querySelectorAll('.image, .image1');
        existingItems.forEach(item => item.remove());

        // Add up to 3 items in main section, rest go to "More" section
        const featuredItems = items.slice(0, 3);
        const moreItems = items.slice(3);

        const moreSection = parent.querySelector('.more-tv-shows-parent');
        if (moreSection) {
            const heading = moreSection.querySelector('.more-tv-shows');
            moreSection.innerHTML = ''; // Clear existing content
            moreSection.appendChild(heading);

            moreItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'thats-so-true-gracie-abrams-wrapper';
                itemDiv.innerHTML = `<div class="thats-so-true">${item}</div>`;
                moreSection.appendChild(itemDiv);
            });
        }


        // Add featured items
        for (let i = 0; i < featuredItems.length; i++) {
            const item = featuredItems[i];
            const itemDiv = document.createElement('div');
            itemDiv.className = i === 0 ? 'image' : 'image1';

            try {
                const href = await fetchCoverImage(item);
                itemDiv.style.cssText = getBackgroundStyle(href);
                itemDiv.innerHTML = `<div class="${i === 0 ? 'friends' : 'queen-of-the text-truncate'}">${item}</div>`;
            } catch (error) {
                console.error(`Error loading cover for ${item}:`, error);
                itemDiv.innerHTML = `<div class="${i === 0 ? 'friends' : 'queen-of-the text-truncate'}">${item}</div>`;
            }
            parent.appendChild(itemDiv);
        }

        // Update "More" section with additional items
    }

    // Load initial selections
    loadSelections();
});


















</script>
</body>
</html>
